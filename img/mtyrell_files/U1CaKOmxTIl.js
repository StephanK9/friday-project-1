if (self.CavalryLogger) { CavalryLogger.start_js(["09Kaz"]); }

__d('OCShopConfigExposer',['OCShopConfig'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={setConfigToGlobalNamespace:function h(){window.OCShopConfig=c('OCShopConfig');}};}),null);
__d('StarGridReorder',['Arbiter','AsyncRequest','CSS','DOM','Event','Locale','Rect','Run','SimpleDrag','StarGrid','StarGridLayout','Style','SubscriptionsHandler','Vector','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=15,i=50,j=80,k=1,l={getOrder:function m(n){return n.map(function(o){return o.getAttribute('data-reorderid');});},addDragListener:function m(n,o,p){if(!n.hasChildNodes())return;var q=new (c('StarGridLayout'))({isStarred:c('StarGrid').isStarred,renderNonStarred:c('StarGrid').renderNonStarred,renderStarred:c('StarGrid').renderStarred,isFixed:c('StarGrid').isFixed}),r=c('Locale').isRTL()?'margin-right':'margin-left',s,t,u,v=c('Rect').getElementBounds(n),w=false,x=q.canonicalize(c('StarGrid').getElements(n)),y,z,aa=new (c('SubscriptionsHandler'))();c('Run').onLeave(aa.release.bind(aa));function ba(ca){return p&&p.contains(ca);}function m(ca){var da=new (c('SimpleDrag'))(ca);da.setMinDragDistance(h);var ea,fa;function ga(){if(!u)return;var la=c('Rect').getViewportBounds(),ma=u.y-la.t,na=la.b-u.y,oa=new (c('Vector'))(0,0);if(ma<na&&ma<i){oa.y=-i+ma;}else if(na<i)oa.y=i-na;oa.y=ha(oa.y);if(w)v=c('Rect').getElementBounds(n);if(oa.y){if(u.y+oa.y>v.b)oa=new (c('Vector'))(0,Math.max(v.b-u.y,0));oa.scrollElementBy(document.body);fa=fa.add(oa);ka(fa);u=u.add(oa);}ea=c('requestAnimationFrame')(ga);}function ha(la){if(la>=0){la=Math.min(la,i);}else la=Math.max(la,-i);return Math.floor(Math.pow(la/i*j,k));}var ia=false,ja=c('DOM').scry(ca,'a[rel="theater"]');ja.forEach(function(la){aa.addSubscriptions(c('Event').listen(la,'click',function(event){if(ia)event.kill();}));});da.subscribe('mousedown',function(la,event){ia=false;t=c('Vector').getEventPosition(event);s=t.sub(new (c('Vector'))(c('Style').get(ca,r),c('Style').get(ca,'margin-top')));return ba(event.target);});da.subscribe('start',function(la,event){if(event.button!==0||ba(event.target))return;ia=true;if(z)c('CSS').removeClass(z,'fbPhotoStarGridAbove');c('CSS').addClass(ca,'fbPhotoStarGridDrag');c('CSS').addClass(ca,'fbPhotoStarGridAbove');z=ca;ea=c('requestAnimationFrame')(ga);});da.subscribe('update',function(la,event){if(!ia)return;var ma=c('Vector').getEventPosition(event);u=ma;if(c('Locale').isRTL())ma.x=2*t.x-ma.x;ma=ma.sub(s);y=q.reorder(x,ca,Math.floor((ma.x+c('StarGrid').getSize(n)/2)/c('StarGrid').getSize(n)),Math.floor((ma.y+c('StarGrid').getSize(n)/2)/c('StarGrid').getSize(n)));fa=ma;c('StarGrid').layoutGrid(n,y);ka(ma);});function ka(la){c('Style').set(ca,'margin-top',la.y+'px');c('Style').set(ca,r,la.x+'px');}da.subscribe('end',function(la,event){if(!ia)return;c('cancelAnimationFrame')(ea);c('CSS').removeClass(ca,'fbPhotoStarGridDrag');c('StarGrid').layoutGrid(n,y);new (c('AsyncRequest'))(o).setData({order:l.getOrder(y)}).setErrorHandler(function(ma){x=ma;c('StarGrid').layoutGrid(n,y);}.bind(this,x)).send();x=y;});}x.forEach(m);aa.addSubscriptions(c('Arbiter').subscribe('StarGrid/UPDATE',function(ca,da){var ea=q.canonicalize(c('StarGrid').getElements(da));ea.forEach(function(fa){if(x.indexOf(fa)===-1)m(fa);});x=ea;w=true;}));}};f.exports=l;}),null);